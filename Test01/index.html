<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" 
          rel="stylesheet" 
          integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" 
          crossorigin="anonymous">
    <!-- FancyBox CSS -->
    <link rel="stylesheet" href="resource/js/fancybox/jquery.fancybox.min.css">
    <!-- Main Stylesheets -->
    <link href="style.css" rel="stylesheet">
    <link href="normalize.css" rel="stylesheet">
    <!-- Icon Library -->
    <link href="resource/icon/fontawesome/css/all.css" rel="stylesheet">
    <!-- Tab icon -->
    <link rel="icon" href="resource/icon/KBY/logo.png">
    <title>KBYCreative | Gallery</title>
  </head>


  <body>
    <!--Top Navigation Menu-->
    <nav class="navbar mb-5 navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">KBY CREATIVE</a>
        <button class="navbar-toggler" type="button" 
                data-bs-toggle="collapse" 
                data-bs-target="#navbarText" 
                aria-controls="navbarText" 
                aria-expanded="false" 
                aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarText">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">GALLERY</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">ABOUT</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">CONTACT</a>
            </li>
          </ul>
          <span class="navbar-text">
            <!-- Logo -->
            <img src="resource/icon/KBY/logo.png" id="KBYlogo" alt=""/>
          </span>
        </div>
      </div>
    </nav>

    <main>
      <section class="gallery">
        <div class="container">
          <div class="row">
            <section class="banner my-5">
                <h1 class="text-center"
                  data-typing-content= "The Gallery"
                  data-typing-characters-per-second= "12"
                ></h1>
                <p class="text-center"
                  data-typing-content="Dedicated to you." 
                  data-typing-characters-per-second= "17"
                ></p>
              </section>

                <div class="UploadSection">
                  <!-- Button trigger modal -->
                  <div class="d-grid col-3 mx-auto upload-button mt-5">
                      <button class="btn btn-primary" type="button" id="uploadButton" 
                              data-bs-toggle="modal" data-bs-target="#uploadModal">Upload</button>                  
                  </div>
                  <!-- Modal -->
                  <div class="modal fade" id="uploadModal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="uploadModalLabel">Upload</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
    
                              <div class="authenticate" id="aform">
                                <form>
                                  <label for="access-key" class="form-label">Key:</label>
                                  <input type="text" id="access-key" class="form-control" autocomplete="off" aria-describedby="passwordHelpBlock">
                                  <div id="passwordHelpBlock" id="helptext" class="form-text">     
                                                         
                                  </div>
                                  <button class="btn btn-primary" type="button" id="check-key" >Enter</button>                                  
                                </form>
                              </div>
    
                              <div class="upload-section" id="uform">
                                <!-- Progress Bar-->
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                        role="progressbar"                                         
                                        style="width: 0%"
                                        aria-valuenow="0" 
                                        aria-valuemin="0" 
                                        aria-valuemax="100">
                                      </div>
                                </div>
                                <!-- Choose picture button-->
                                <input type="file" id="file-selector" accept="image/*">
                              </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" id="confirm" class="btn btn-primary" disabled>Upload</button>
                          </div>
                        </div>
                      </div>
                  </div>
              </div>
           
          </div>
        </div>

          <!-- Image gallery -->
          <div class="container">
          <div class="row">
            <div class="col">
              <div class="row">
              </div>
              <div class="row" id="gallery">
                <div class="col-4">
                  <figure class="mb-4">
                    <a href="resource/image/57613725-11D2-4350-A4B2-E727BAD20FBE.jpeg" data-fancybox="image" data-caption="Kelvin Liu">
                      <img src="resource/image/57613725-11D2-4350-A4B2-E727BAD20FBE.jpeg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/IMG_20200902_105831.jpg" data-fancybox="image" data-caption="Aravind Raju">
                      <img src="resource/image/IMG_20200902_105831.jpg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/156207944_462182061572629_9189712933422446778_n.png" data-fancybox="image" data-caption="James Yang">
                      <img src="resource/image/156207944_462182061572629_9189712933422446778_n.png" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/unnamed.jpg" data-fancybox="image" data-caption="Cathy Jung">
                      <img src="resource/image/unnamed.jpg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/gunjan.jpeg" data-fancybox="image" data-caption="Gunjan Chaudhari">
                      <img src="resource/image/gunjan.jpeg" alt="" />
                    </a>
                  </figure>
                </div>
                <div class="col-4">
                  <figure class="mb-4">
                    <a href="resource/image/796BA4DF-5115-4D62-8A96-8EB96EB2CFAC.jpeg" data-fancybox="image" data-caption="Serena Zha">
                      <img src="resource/image/796BA4DF-5115-4D62-8A96-8EB96EB2CFAC.jpeg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/14440714_1358544157489334_4481831843659335274_n.jpg" data-fancybox="image" data-caption="Owen Zhao">
                      <img src="resource/image/14440714_1358544157489334_4481831843659335274_n.jpg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/koby.jpg" data-fancybox="image" data-caption="Adam Zreika">
                      <img src="resource/image/koby.jpg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/IMG_20210302_000049_857.jpg" data-fancybox="image" data-caption="Nat Seeto">
                      <img src="resource/image/IMG_20210302_000049_857.jpg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/FB_IMG_1615362644143.jpg" data-fancybox="image" data-caption="Zoe Ramirez">
                      <img src="resource/image/FB_IMG_1615362644143.jpg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/me.jpg" data-fancybox="image" data-caption="Colby">
                      <img src="resource/image/me.jpg" alt="" />
                    </a>
                  </figure>
                  <figure class="mb-4">
                    <a href="resource/image/miran.jpg" data-fancybox="image" data-caption="Miran Kadir">
                      <img src="resource/image/miran.jpg" alt="" />
                    </a>
                  </figure>
                  
                </div>
                <div class="col-4">
                  <figure class="mb-4">
                    <a href="resource/image/inbound621503061.jpg" data-fancybox="image" data-caption="Kristy Che">
                      <img src="resource/image/inbound621503061.jpg" alt="" />
                    </a>
                  </figure> 
                  <figure class="mb-4">
                    <a href="resource/image/IMG-20210306-WA0027.jpg" data-fancybox="image" data-caption="Arshdeep & Max">
                      <img src="resource/image/IMG-20210306-WA0027.jpg" alt="" />
                    </a>
                  </figure>         
                  <figure class="mb-4">
                    <a href="resource/image/CCD664C4-7C63-407F-A614-3349C0F0DFD2.jpeg" data-fancybox="image" data-caption="Paige Winter">
                      <img src="resource/image/CCD664C4-7C63-407F-A614-3349C0F0DFD2.jpeg" alt="" />
                    </a>
                  </figure>  
                  <figure class="mb-4">
                    <a href="resource/image/635CB481-755E-4E38-BFD3-96481A38AD87.jpeg" data-fancybox="image" data-caption="Alvin Zhu">
                      <img src="resource/image/635CB481-755E-4E38-BFD3-96481A38AD87.jpeg" alt="" />
                    </a>
                  </figure>  
                  <figure class="mb-4">
                    <a href="resource/image/20200719_090712.jpg" data-fancybox="image" data-caption="Alan Lee">
                      <img src="resource/image/20200719_090712.jpg" alt="" />
                    </a>
                  </figure>  
                </div>
              </div>
            </div>
          </div>
        </div>
    </section>
    </main>

    <!--Footer Social Media Icons-->
    <nav class="navbar navbar-expand navbar-light bg-light">
      <div class="container">
        <div class="navbar">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a href="#facebookicon" class="nav-link"><i class="fab fa-facebook fa-lg"></i></a>
            </li>
            <li class="nav-item">
              <a href="#instagramicon" class="nav-link"><i class="fab fa-instagram fa-lg"></i></a>
            </li>
            <li class="nav-item">
              <a href="#linkedin" class="nav-link"><i class="fab fa-linkedin fa-lg"></i></a>
            </li>
          </ul>

          
        </div>
      </div>
    </nav>




    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
     <script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-storage.js"></script>

    <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyBLAxwu3xIK7LfFMP9GAvTUp5OuRvzEmtw",
        authDomain: "gallery-96670.firebaseapp.com",
        databaseURL: "https://gallery-96670-default-rtdb.firebaseio.com",
        projectId: "gallery-96670",
        storageBucket: "gallery-96670.appspot.com",
        messagingSenderId: "117779600584",
        appId: "1:117779600584:web:3fcb7c610447b534c601fd",
        storageBucket: 'gs://gallery-96670.appspot.com'
    };
    // Initialize Firebase  
    firebase.initializeApp(firebaseConfig);



    // UPLOADING IMAGES 
    // var progressBar = document.getElementById("progressBar");
    var fileButton = document.getElementById("file-selector");
    var confirm = document.getElementById("confirm");
    var storageRef = firebase.storage().ref();
    var photo;
    var percentage;


    // Listen for File Selection
    fileButton.addEventListener('change', selectFile, false);
    function selectFile(){
      photo = this.files[0];
      //If a file is selected, make upload button available
      if (photo != null){
        confirm.removeAttribute("disabled");
      }
    }
    // Listen for file upload confirm
    confirm.addEventListener('click', confirmUpload);
    function confirmUpload(){
      // Storage reference
      imageRef = firebase.storage().ref('image/' + photo.name);
      // Upload
      var task = imageRef.put(photo);
      // Update progress bar
      task.on('state_changed', 
        function progress(snapshot){
          percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
          var progressBar = $('.progress-bar');
          progressBar.css('width', percentage + '%');
          progressBar.attr('aria-valuenow', percentage);

        },

        function error(err){
          console.log('An error occured while uploading.');
          
        },
        function complete(refreshIntervalID){
          console.log("Image uploaded successfully");
          console.log("File name: " + photo.name);

          // Hide the modal after upload complete
          function closeModal(){
            if (percentage == 100){
            var modal = document.getElementById("uploadModal");
            var bmodal = bootstrap.Modal.getInstance(modal);
            bmodal.hide();
            }
          }
          setTimeout(function(){ 
            closeModal(); 
          }, 2000);
          
          // Create success alert
          function createUploadAlert(){
            var alert = document.createElement('div');
            alert.className = "alert alert-success alert-dismissible fade show"
            alert.setAttribute('role', 'alert');
            alert.setAttribute('id','uploadAlert');
            alert.innerHTML = 'Image Uploaded Successfully'
            document.getElementById('row1').appendChild(alert);
          }
          createUploadAlert();
        }
      );
    }
    </script>

    <!-- Bootstrap 5 JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" 
            crossorigin="anonymous"></script>
    <!-- Jquery 3-->
    <script src ="resource/js/jquery/jquery-3.5.1.min.js"></script>
    <!-- FancyBox JS-->
    <script src="resource/js/fancybox/jquery.fancybox.min.js"></script>
    <!-- Edit FancyBox Properties -->
    <script>
      $('[data-fancybox]').fancybox({
        loop: true,
        buttons: [
        //"zoom",
        //"share",
        //"slideShow",
        //"fullScreen",
        //"download",
        "thumbs",
        "close"
        ]
      })
    </script>

    <!-- Key checker-->
    <script src="resource/js/keyCheck.js"></script>

    <!-- Type-effect on banner-->
    <script src="resource/js/type-effect.js"></script>

  </body>
</html>